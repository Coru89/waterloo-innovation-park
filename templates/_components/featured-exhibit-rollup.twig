{% set offset = offset ?? 0 %}

{% set entryQuery = craft.entries.section('exhibitions').one().galleryItems.offset(offset).limit(limit) %}
{% set entries = entryQuery.ids() %}

<section class="gallery-rollup">
  <div class="u-container gallery-rollup__inner">
    <ul class="gallery-rollup__list">
      {% for itemId in entries %}
        {{ sprig('_components/gallery-card', {'itemId': itemId }) }}
      {% endfor %}
    </ul>
  </div>
</section>

{# If the total entry count is greater than the number that has been displayed #}
{% if entryQuery.count() > offset + entries|length %}
  {# Increments `offset` by the value of `limit` #}
  <button id="featured-exhibit-load-more" sprig s-val:offset="{{ offset + limit }}"
    {# Appends entries #}
    s-select=".gallery-rollup__list .gallery-card__item" s-target=".gallery-rollup__list" s-swap="beforeend"
    {# If this button was clicked then swap it out-of-band #}
    {{ sprig.trigger == 'featured-exhibit-load-more' ? 's-swap-oob="true"' }}
  >
    Show More
  </button>
{% else %}
  {# Swaps the button out-of-band with a dummy button that is hidden #}
    <button id="featured-exhibit-load-more" s-swap-oob="true" style="display: none"></button>
{% endif %}